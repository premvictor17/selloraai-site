<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trending Products - TrendPro Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-primary { background: linear-gradient(135deg, #1e293b 0%, #334155 100%); }
        .heatmap-maharashtra { fill: #10b981; stroke: #059669; stroke-width: 1; }
        .heatmap-karnataka { fill: #84cc16; stroke: #65a30d; stroke-width: 1; }
        .heatmap-tamilnadu { fill: #eab308; stroke: #ca8a04; stroke-width: 1; }
        .heatmap-others { fill: #64748b; stroke: #475569; stroke-width: 1; opacity: 0.7; }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white min-h-screen">
    
    <!-- Navigation -->
    <nav class="bg-slate-900/95 backdrop-blur-xl shadow-xl sticky top-0 z-50 border-b border-slate-700/50">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-chart-trending-up"></i>
                    </div>
                    <span class="text-xl font-bold">TrendPro</span>
                </a>
                
                <div class="hidden lg:flex items-center space-x-8">
                    <a href="index.html" class="text-slate-300 hover:text-white px-3 py-2 text-sm font-medium transition-colors">Home</a>
                    <a href="#pro-products" class="text-emerald-400 border-b-2 border-emerald-400 px-3 py-2 text-sm font-semibold">Pro Products</a>
                    <a href="#elite-products" class="text-emerald-400 border-b-2 border-emerald-400 px-3 py-2 text-sm font-semibold">Elite Products</a>
                    <a href="dashboard.html" class="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2.5 rounded-xl text-sm font-semibold shadow-lg">Dashboard</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Plan Status Bar -->
    <div id="plan-status" class="bg-gradient-to-r from-slate-800 to-slate-900 border-b border-slate-700 px-6 py-4">
        <div class="max-w-7xl mx-auto flex flex-col lg:flex-row items-center justify-between gap-4">
            <div class="flex items-center space-x-4">
                <div class="w-3 h-3 bg-emerald-400 rounded-full animate-pulse"></div>
                <span class="text-sm font-medium text-slate-400" id="plan-text">Loading plan...</span>
            </div>
            <div class="flex items-center space-x-3">
                <span class="text-xs text-slate-500">Showing:</span>
                <div class="flex space-x-2">
                    <button onclick="setPlanView('pro')" class="px-4 py-2 text-xs rounded-xl bg-slate-700/50 hover:bg-emerald-600/50 text-slate-300 transition-all" id="pro-btn">Pro (250/mo)</button>
                    <button onclick="setPlanView('elite')" class="px-4 py-2 text-xs rounded-xl bg-emerald-600 text-white font-semibold shadow-lg" id="elite-btn">Elite (Unlimited)</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pro Products -->
    <section id="pro-products" class="py-24 px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-20">
                <h1 class="text-4xl lg:text-5xl font-bold text-white mb-6">Pro Products</h1>
                <p class="text-xl text-slate-400 max-w-2xl mx-auto">
                    250 high-potential trending products. India state demand + 5 verified suppliers each.
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8" id="pro-product-grid">
                <!-- Product cards will be populated by JS -->
            </div>
        </div>
    </section>

    <!-- Elite Products -->
    <section id="elite-products" class="py-24 px-6 lg:px-8 bg-slate-800/30">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-20">
                <div class="inline-flex items-center px-6 py-3 bg-emerald-500/20 border border-emerald-500/30 rounded-2xl text-emerald-400 text-lg font-semibold mb-8 mx-auto">
                    <i class="fas fa-crown mr-2"></i>Elite Exclusive
                </div>
                <h2 class="text-4xl lg:text-5xl font-bold text-white mb-6">Elite Intelligence</h2>
                <p class="text-xl text-slate-400 max-w-2xl mx-auto">
                    Unlimited products + Global demand + 10+ suppliers + Advanced analytics
                </p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8" id="elite-product-grid">
                <!-- Elite product cards populated by JS -->
            </div>
        </div>
    </section>

    <!-- Product Detail Modal -->
    <div id="product-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden">
        <div class="max-w-6xl mx-auto h-full p-6 lg:p-12 flex items-center justify-center">
            <div class="bg-slate-900/95 backdrop-blur-xl rounded-3xl shadow-3xl w-full max-h-[90vh] overflow-y-auto border border-slate-700 max-w-7xl">
                <div class="sticky top-0 bg-slate-900/95 backdrop-blur-xl z-10 border-b border-slate-700 rounded-t-3xl p-8">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 id="modal-product-name" class="text-3xl font-bold text-white"></h2>
                            <p id="modal-plan-badge" class="inline-flex items-center px-4 py-2 bg-emerald-500/20 border border-emerald-500/30 rounded-xl text-emerald-400 text-sm font-semibold mt-2"></p>
                        </div>
                        <button onclick="closeModal()" class="p-3 rounded-2xl bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white transition-all">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>

                <div class="p-8 grid lg:grid-cols-2 gap-12">
                    <!-- Product Image & Stats -->
                    <div>
                        <img id="modal-product-image" src="#" alt="Product" class="w-full rounded-2xl shadow-2xl mb-8 aspect-video object-cover">
                        
                        <div class="grid md:grid-cols-3 gap-6 mb-12">
                            <div class="text-center p-6 bg-slate-800/50 rounded-2xl border border-slate-700">
                                <div class="text-3xl font-bold text-emerald-400 mb-2" id="modal-india-demand">47%</div>
                                <div class="text-sm text-slate-400">India Demand ‚Üë</div>
                            </div>
                            <div class="text-center p-6 bg-slate-800/50 rounded-2xl border border-slate-700">
                                <div class="text-3xl font-bold text-blue-400 mb-2" id="modal-global-demand">23%</div>
                                <div class="text-sm text-slate-400">Global Markets</div>
                            </div>
                            <div class="text-center p-6 bg-slate-800/50 rounded-2xl border border-slate-700">
                                <div class="text-3xl font-bold text-purple-400 mb-2" id="modal-search-volume">12K</div>
                                <div class="text-sm text-slate-400">Monthly Searches</div>
                            </div>
                        </div>
                    </div>

                    <!-- India Heatmap -->
                    <div>
                        <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                            <i class="fas fa-map mr-3 text-emerald-400"></i>India Demand Heatmap
                        </h3>
                        <div id="india-heatmap" class="w-full h-96 bg-slate-800 rounded-2xl border-2 border-slate-700 mb-8 relative overflow-hidden">
                            <!-- SVG India Map -->
                            <svg viewBox="0 0 800 1000" class="w-full h-full">
                                <!-- Simplified India states with demand colors -->
                                <path class="heatmap-maharashtra" d="M200,200 L250,220 L280,250 L260,300 L220,320 Z" data-state="Maharashtra" data-demand="47%"/>
                                <path class="heatmap-karnataka" d="M180,350 L220,370 L250,420 L210,450 L170,430 Z" data-state="Karnataka" data-demand="32%"/>
                                <path class="heatmap-tamilnadu" d="M220,480 L260,500 L290,520 L270,550 L230,540 Z" data-state="Tamil Nadu" data-demand="28%"/>
                                <!-- Add more states as needed -->
                            </svg>
                            <div class="absolute bottom-4 left-4 bg-slate-900/90 backdrop-blur-xl rounded-xl p-4 border border-slate-700 text-sm">
                                <div class="flex items-center mb-2">
                                    <div class="w-4 h-4 bg-emerald-500 rounded mr-2"></div>
                                    <span>High (40%+)</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-4 h-4 bg-yellow-500 rounded mr-2"></div>
                                    <span>Medium (20-40%)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Global Demand & Top Locations -->
                    <div class="lg:col-span-2">
                        <h3 class="text-2xl font-bold text-white mb-6">Global Demand Signals</h3>
                        <div class="grid md:grid-cols-2 gap-6 mb-12">
                            <div class="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700">
                                <h4 class="font-semibold text-slate-300 mb-4">Top Countries</h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between text-sm"><span>üá∫üá∏ USA</span><span id="modal-usa-demand">18%</span></div>
                                    <div class="flex justify-between text-sm"><span>üá¶üá™ UAE</span><span id="modal-uae-demand">12%</span></div>
                                    <div class="flex justify-between text-sm"><span>üá©üá™ Germany</span><span id="modal-germany-demand">9%</span></div>
                                    <div class="flex justify-between text-sm"><span>üá¶üá∫ Australia</span><span id="modal-australia-demand">7%</span></div>
                                </div>
                            </div>
                            <div class="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700">
                                <h4 class="font-semibold text-slate-300 mb-4">Top Cities (India)</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between"><span>üèôÔ∏è Mumbai</span><span>‚Çπ2.4Cr</span></div>
                                    <div class="flex justify-between"><span>üèôÔ∏è Bengaluru</span><span>‚Çπ1.8Cr</span></div>
                                    <div class="flex justify-between"><span>üèôÔ∏è Delhi</span><span>‚Çπ1.6Cr</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Suppliers -->
                    <div class="lg:col-span-2">
                        <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                            <i class="fas fa-handshake mr-3 text-emerald-400"></i>Verified Suppliers
                            <span class="ml-4 px-3 py-1 bg-emerald-500/20 border border-emerald-500/30 rounded-xl text-xs font-semibold text-emerald-400" id="modal-supplier-count">10+</span>
                        </h3>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="modal-suppliers">
                            <!-- Suppliers populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Supabase config
        const supabaseUrl = 'YOUR_SUPABASE_URL';
        const supabaseKey = 'YOUR_SUPABASE_ANON_KEY';
        const supabase = Supabase.createClient(supabaseUrl, supabaseKey);

        let currentPlanView = 'pro';
        let userPlan = 'free';
        let products = {};

        // Fake data for demo (replace with Supabase query)
        const demoProducts = {
            pro: [
                { id: 1, name: "Wireless Gaming Earbuds", image: "https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400", indiaDemand: "47%", globalDemand: "N/A", plan: "pro" },
                { id: 2, name: "Smart Water Bottle", image: "https://images.unsplash.com/photo-1588252491566-1392e050b5eb?w=400", indiaDemand: "32%", globalDemand: "N/A", plan: "pro" },
                { id: 3, name: "Portable Blender", image: "https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=400", indiaDemand: "28%", globalDemand: "N/A", plan: "pro" },
                { id: 4, name: "LED Desk Lamp", image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400", indiaDemand: "25%", globalDemand: "N/A", plan: "pro" }
            ],
            elite: [
                { id: 5, name: "Smart Ring Fitness Tracker", image: "https://images.unsplash.com/photo-1612872087729-bb6e2a62f2db?w=400", indiaDemand: "52%", globalDemand: "23%", plan: "elite" },
                { id: 6, name: "4K Action Camera", image: "https://images.unsplash.com/photo-1505751172876-fa1923c5c528?w=400", indiaDemand: "41%", globalDemand: "19%", plan: "elite" },
                { id: 7, name: "Electric Kettle 1.7L", image: "https://images.unsplash.com/photo-1592266094076-1beca9f2d5a3?w=400", indiaDemand: "38%", globalDemand: "15%", plan: "elite" },
                { id: 8, name: "Noise Cancelling Headphones", image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400", indiaDemand: "35%", globalDemand: "27%", plan: "elite" }
            ]
        };

        // Initialize
        async function init() {
            await checkUserPlan();
            renderProducts();
            setPlanView('pro');
        }

        async function checkUserPlan() {
            try {
                const { data } = await supabase
                    .from('users')
                    .select('plan')
                    .eq('email', 'premvictor@gmail.com')
                    .single();
                
                userPlan = data?.plan || 'free';
                document.getElementById('plan-text').textContent = `Your plan: ${userPlan.toUpperCase()}`;
                
                if (userPlan === 'elite') {
                    document.getElementById('elite-btn').classList.add('ring-2', 'ring-emerald-400/50');
                }
            } catch (error) {
                console.log('Free user');
            }
        }

        function renderProducts() {
            const proGrid = document.getElementById('pro-product-grid');
            const eliteGrid = document.getElementById('elite-product-grid');
            
            proGrid.innerHTML = demoProducts.pro.map(product => createProductCard(product)).join('');
            eliteGrid.innerHTML = demoProducts.elite.map(product => createProductCard(product)).join('');
        }

        function createProductCard(product) {
            return `
                <div class="group bg-slate-900/70 backdrop-blur-xl rounded-3xl p-8 border border-slate-700 hover:border-emerald-500/50 hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 cursor-pointer" onclick="openProductModal(${product.id})">
                    <div class="relative mb-6">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover rounded-2xl shadow-xl group-hover:scale-105 transition-transform">
                        <div class="absolute top-4 right-4 px-3 py-1 bg-emerald-500/90 text-white text-xs font-bold rounded-xl shadow-lg">
                            ${product.indiaDemand}
                        </div>
                        ${product.plan === 'elite' ? '<div class="absolute bottom-4 left-4 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-600 text-white text-xs font-bold rounded-xl shadow-lg">ELITE</div>' : ''}
                    </div>
                    <h3 class="text-xl font-bold text-white mb-4 line-clamp-2">${product.name}</h3>
                    <div class="flex items-center justify-between text-sm text-slate-400 mb-6">
                        <span><i class="fas fa-search mr-1"></i>12K searches</span>
                        <span id="card-global-${product.id}">${product.globalDemand !== 'N/A' ? product.globalDemand : 'Pro Only'}</span>
                    </div>
                    <div class="flex items-center space-x-4 text-xs text-slate-500">
                        <span class="flex items-center"><i class="fas fa-map-marker-alt mr-1 text-emerald-400"></i>India Heatmap</span>
                        ${product.plan === 'elite' ? '<span class="flex items-center"><i class="fas fa-globe mr-1 text-blue-400"></i>Global Data</span>' : ''}
                    </div>
                </div>
            `;
        }

        function setPlanView(plan) {
            currentPlanView = plan;
            document.getElementById('pro-btn').classList.remove('bg-emerald-600', 'text-white');
            document.getElementById('elite-btn').classList.remove('bg-emerald-600', 'text-white');
            document.getElementById(`${plan}-btn`).classList.add('bg-emerald-600', 'text-white');
            
            if (plan === 'elite' && userPlan !== 'elite') {
                alert('Upgrade to Elite for unlimited access!');
                setPlanView('pro');
                return;
            }
            
            document.getElementById('pro-products').style.display = plan === 'pro' ? 'block' : 'none';
            document.getElementById('elite-products').style.display = plan === 'elite' ? 'block' : 'none';
        }

        function openProductModal(productId) {
            const product = [...demoProducts.pro, ...demoProducts.elite].find(p => p.id === productId);
            if (!product) return;
            
            // Populate modal
            document.getElementById('modal-product-name').textContent = product.name;
            document.getElementById('modal-product-image').src = product.image;
            document.getElementById('modal-india-demand').textContent = product.indiaDemand;
            document.getElementById('modal-plan-badge').textContent = product.plan.toUpperCase();
            
            if (product.plan === 'elite') {
                document.getElementById('modal-global-demand').textContent = '23%';
                // Add more elite data
            }
            
            renderSuppliers(productId);
            document.getElementById('product-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function renderSuppliers(productId) {
            const suppliers = [
                { name: "Yiwu Tech Ltd", location: "China", contact: "+86 123456789", whatsapp: "whatsapp.me/123456", moq: "100", fob: "$2.50" },
                { name: "Shenzhen Gadgets", location: "China", contact: "+86 987654321", whatsapp: "whatsapp.me/987654", moq: "50", fob: "$2.20" },
                // Add 8 more...
            ];
            
            const container = document.getElementById('modal-suppliers');
            container.innerHTML = suppliers.slice(0, product.plan === 'elite' ? 10 : 5).map((s, i) => `
                <div class="group bg-slate-800/50 hover:bg-slate-700/50 backdrop-blur-sm rounded-2xl p-6 border border-slate-700 hover:border-emerald-500/50 transition-all cursor-pointer hover:-translate-y-1">
                    <div class="flex items-start justify-between mb-4">
                        <h4 class="font-bold text-white">${s.name}</h4>
                        <div class="px-3 py-1 bg-emerald-500/20 text-emerald-400 text-xs rounded-xl font-semibold">#${i+1}</div>
                    </div>
                    <div class="space-y-2 text-sm text-slate-300 mb-4">
                        <div><i class="fas fa-map-marker-alt mr-2 text-slate-400"></i>${s.location}</div>
                        <div><i class="fas fa-phone mr-2 text-slate-400"></i>${s.contact}</div>
                        <div class="flex items-center"><i class="fab fa-whatsapp mr-2 text-emerald-400"></i><a href="${s.whatsapp}" class="hover:text-emerald-300">WhatsApp</a></div>
                    </div>
                    <div class="flex items-center justify-between text-xs text-slate-400 pt-4 border-t border-slate-700">
                        <span>MOQ: ${s.moq}</span>
                        <span>FOB: ${s.fob}</span>
                    </div>
                </div>
            `).join('');
        }

        function closeModal() {
            document.getElementById('product-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Event listeners
        window.onclick = function(event) {
            if (event.target.id === 'product-modal') closeModal();
        };

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
